name: Daily Job Post

on: 
    schedule:
        # Daily at 12:00 PM NL time
        - cron: '30 15 * * *'

    workflow_dispatch:

jobs:
    daily_post:
        name: Daily Post
        runs-on: ubuntu-latest
        steps:
            - name: Check out repo
              uses: actions/checkout@v4

            - name: Check out data
              uses: actions/checkout@v4
              with:
                repository: CTS-NL/CTS-NL.github.io
                path: 'CTS-NL.github.io'

            - name: Setup NodeJS
              uses: actions/setup-node@v4
              with:
                node-version: '22.x'

            - name: Restore Cache
              uses: actions/cache/restore@v4
              id: restore-cache
              with:
                path: node_modules
                key: ${{ runner.os }}-node-${{ hashFiles('package-lock.json') }}

            - name: Install Node Modules
              if: steps.restore-cache.outputs.cache-hit != 'true'
              run: npm install

            - name: Cache Node Modules
              if: steps.restore-cache.outputs.cache-hit != 'true'
              uses: actions/cache/save@v4
              with:
                path: node_modules
                key: ${{ runner.os }}-node-${{ hashFiles('package-lock.json') }}

            - name: Run post-jobs script
              run: node ./src/bin/cts.js -- jobs $GITHUB_WORKSPACE/CTS-NL.github.io/_data

            - name: Printing
              run: ls -la


            